# 定时下载功能使用说明

## 功能概述

新增的定时下载功能允许TikTokDownloader在每天凌晨2点自动执行下载任务，无需手动操作。

## 使用方法

### 方法一：通过主程序菜单

1. 正常启动程序：
   ```bash
   python main.py
   ```

2. 在主菜单中选择「定时下载管理」选项

3. 在定时下载管理菜单中可以：
   - 启动定时下载任务
   - 停止定时下载任务
   - 查看定时任务状态
   - 设置自定义执行时间

### 方法二：直接启动定时任务

使用提供的启动脚本直接启动定时下载：

```bash
python start_scheduler.py
```

这将直接启动定时任务，无需进入交互菜单。

## 功能特性

### 自动下载内容

定时任务将自动执行以下下载操作：
- 批量下载账号作品
- 下载合集作品
- 下载收藏作品

### 时间设置

- **默认时间**：每天凌晨2:00执行
- **自定义时间**：可通过菜单设置自定义执行时间
- **时间格式**：HH:MM（24小时制），例如：02:00、14:30

### 任务管理

- **启动任务**：开始定时下载调度
- **停止任务**：停止定时下载调度
- **状态查看**：查看当前任务运行状态
- **安全退出**：程序退出时自动停止定时器

## 注意事项

1. **配置要求**：确保已正确配置Cookie和下载参数
2. **网络连接**：定时执行时需要稳定的网络连接
3. **存储空间**：确保有足够的存储空间用于下载文件
4. **程序运行**：定时任务需要程序保持运行状态
5. **权限设置**：确保程序有写入下载目录的权限

## 故障排除

### 定时任务未执行

1. 检查程序是否正在运行
2. 确认定时任务是否已启动
3. 检查系统时间是否正确
4. 查看控制台输出的错误信息

### 下载失败

1. 检查网络连接
2. 验证Cookie是否有效
3. 确认下载配置是否正确
4. 检查目标账号或内容是否可访问

## 技术实现

- 使用 `APScheduler` 库实现定时任务调度
- 支持异步执行，不阻塞主程序
- 集成现有的下载器和配置系统
- 提供完整的任务生命周期管理